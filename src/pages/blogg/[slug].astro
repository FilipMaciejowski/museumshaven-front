---
import { Image } from 'astro:assets';

import Layout from "../../layouts/Layout.astro";

import fetchApi from "../../libs/strapi";

export async function getStaticPaths() {
  try {
    const articles = await fetchApi("blog-posts", true);

    return articles.data.map((article) => ({
      params: { slug: article.attributes.slug },
      props: article.attributes,
    }));
  } catch (e) {
    console.log(e);
  }
}
const article = Astro.props;
---

<Layout title={article.title}>
  <p>{article.title}</p>
  <p>{article.content}</p>
  <p><Image src={`${import.meta.env.STRAPI_URL}${article.img.data.attributes.url}`} width={article.img.data.attributes.width} height={article.img.data.attributes.height}  alt=""/>
  </p>
</Layout>
